<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="MyOwnMocker : Online Mock Server">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>MyOwnMocker</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/fopina/myownmocker">View on GitHub</a>

          <h1 id="project_title">MyOwnMocker</h1>
          <h2 id="project_tagline">Online Mock Server</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/fopina/myownmocker/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/fopina/myownmocker/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>For some tests  (such as XCode UI Testing) we cannot use dependency injection nor mock classes. The easiest solution is to run the application using a mock server.</p>

<p>There are a few solutions already (such as <a href="http://mocky.io">http://mocky.io</a> and <a href="http://mockable.io">http://mockable.io</a>) but I wanted to make my own, MyOwnMocker.</p>

<p>This code is running live in <a href="https://mom.skmobi.com/">https://mom.skmobi.com/</a> so whenever you need, just call MOM.</p>

<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<p><a href="https://travis-ci.org/fopina/myownmocker"><img src="https://travis-ci.org/fopina/myownmocker.svg" alt="Build Status"></a></p>

<ol>
<li>
<a href="#api">API</a>

<ol>
<li> <a href="#register">Register</a>
</li>
<li> <a href="#setup">Setup</a>
</li>
<li> <a href="#mock">Mock</a>
</li>
</ol>
</li>
<li><a href="#setting-up-your-own-copy-of-mom">Setting up your own copy of MOM</a></li>
</ol>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<h4>
<a id="register" class="anchor" href="#register" aria-hidden="true"><span class="octicon octicon-link"></span></a>Register</h4>

<p>Register for a mock token.</p>

<p>This is the first call you need to make to generate a mock API token to create mock API paths later</p>

<pre><code>GET /register/
</code></pre>

<h6>
<a id="example-response" class="anchor" href="#example-response" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Response</h6>

<pre><code>&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

{
  "token": "MeB3aNo4yDXrtNH6",
  "setup_url": "http://mom.skmobi.com/setup/MeB3aNo4yDXrtNH6/",
  "setup_secure_url": "https://mom.skmobi.com/setup/MeB3aNo4yDXrtNH6/",
  "mock_base_url": "http://mom.skmobi.com/mock/MeB3aNo4yDXrtNH6/",
  "mock_base_secure_url": "https://mom.skmobi.com/mock/MeB3aNo4yDXrtNH6/"
}
</code></pre>

<h3>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup</h3>

<p>Setup a mock path.</p>

<p>This is the call to setup (create or replace) mock API paths</p>

<pre><code>POST /setup/:token/
Content-Type: application/json
</code></pre>

<h6>
<a id="parameters" class="anchor" href="#parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h6>

<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="center">Type</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">path</td>
<td align="center">string</td>
<td align="center">
<strong>Required</strong>. The API method path (such as <em>login/</em> or <em>user/fopina/details/</em>)</td>
</tr>
<tr>
<td align="center">status_code</td>
<td align="center">int</td>
<td align="center">
<strong>Required</strong>. The HTTP response status code</td>
</tr>
<tr>
<td align="center">content_type</td>
<td align="center">string</td>
<td align="center">
<strong>Required</strong>. The HTTP response content type</td>
</tr>
<tr>
<td align="center">custom_headers</td>
<td align="center">dictionary</td>
<td align="center">Optional. Extra HTTP headers to include in the response</td>
</tr>
<tr>
<td align="center">body</td>
<td align="center">string</td>
<td align="center">Optional. The body of the response</td>
</tr>
</tbody>
</table>

<h6>
<a id="example-input" class="anchor" href="#example-input" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Input</h6>

<pre><code>{
    "path": "login/",
    "status_code": 400,
    "content_type": "application/json",
    "custom_headers": { "X-My-API-Version": "1" },
    "body": "{\"code\": \"invalid_login\"}"
}
</code></pre>

<h6>
<a id="example-response-1" class="anchor" href="#example-response-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Response</h6>

<pre><code>&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

{
    "message": "ok",
    "path_url": "http://mom.skmobi.com/mock/MeB3aNo4yDXrtNH6/login/",
    "path_secure_url": "https://mom.skmobi.com/mock/MeB3aNo4yDXrtNH6/login/"
}
</code></pre>

<h3>
<a id="mock" class="anchor" href="#mock" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mock</h3>

<p>Your mock API base URL.</p>

<p>This is your mock API "new" base URL. All the mock API paths you setup are available under <code>/mock/:token/</code> for both <code>GET</code>and <code>POST</code>methods.
Example (using token and path created in <code>register</code>and <code>setup</code>section examples):</p>

<pre><code>$ curl -v https://mom.skmobi.com/mock/MeB3aNo4yDXrtNH6/login/
&lt; HTTP/1.1 400 BAD REQUEST
&lt; Content-Type: application/json
&lt; Content-Length: 25
&lt;
{"code": "invalid_login"}
</code></pre>

<h2>
<a id="setting-up-your-own-copy-of-mom" class="anchor" href="#setting-up-your-own-copy-of-mom" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up your own copy of MOM</h2>

<p>Using <a href="https://devcenter.heroku.com/articles/heroku-command">Heroku CLI</a>, setting up your own copy is as easy as:</p>

<pre><code>$ git clone https://github.com/fopina/myownmocker
Cloning into 'myownmocker'...
remote: Counting objects: 35, done.
remote: Compressing objects: 100% (28/28), done.
remote: Total 35 (delta 5), reused 11 (delta 2), pack-reused 0
Unpacking objects: 100% (35/35), done.
Checking connectivity... done.

$ cd myownmocker/
$ heroku create
Creating evening-scrubland-9609... done, stack is cedar-14
https://evening-scrubland-9609.herokuapp.com/ | https://git.heroku.com/evening-scrubland-9609.git
Git remote heroku added

$ git push heroku
Counting objects: 14, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (14/14), 4.81 KiB | 0 bytes/s, done.
Total 14 (delta 2), reused 0 (delta 0)
remote: Compressing source files... done.
remote: Building source:
remote:
(...)
remote: -----&gt; Launching... done, v4
remote:        https://evening-scrubland-9609.herokuapp.com/ deployed to Heroku
remote:
remote: Verifying deploy... done.
To https://git.heroku.com/evening-scrubland-9609.git
 * [new branch]      master -&gt; master

$ heroku run ./manage.py initdb
Running ./manage.py initdb on evening-scrubland-9609... up, run.7551
Using database postgres://frsnvzfkdflxFc:ZfT4aMeprPYiQC@ec2-107-21-219-235.compute-1.amazonaws.com:5432/dk3m44gfjo30g
Created tables
</code></pre>

<p>And it's live!</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">MyOwnMocker maintained by <a href="https://github.com/fopina">fopina</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-53638170-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
